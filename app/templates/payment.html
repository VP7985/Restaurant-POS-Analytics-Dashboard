{% extends "layouts/base.html" %}
{% set title = "Payment" %}

{% block content %}
<div class="flex justify-center items-center px-4 py-10 min-h-screen">
    <div class="bg-slate-800 p-8 rounded-xl border border-slate-700 shadow-lg w-full max-w-lg text-white">
        <h2 class="text-2xl font-bold mb-2 text-center">Complete Your Payment</h2>
        <p class="text-center text-slate-400 mb-6">Order Total: <span id="payment-total" class="font-bold">â‚¹0.00</span></p>
        
        <div class="flex border-b border-slate-700 mb-4">
            <button data-payment="card" class="payment-tab flex-1 py-2 text-center font-bold border-b-2 border-sky-500 text-sky-500">Card</button>
            <button data-payment="upi" class="payment-tab flex-1 py-2 text-center font-bold border-b-2 border-transparent text-slate-400">UPI</button>
        </div>

        <form id="cardPaymentForm" class="payment-form space-y-4">
            <div class="input-box">
                <label class="font-bold text-sm text-slate-300">Cards Accepted:</label>
                <div id="card-logos" class="flex items-center gap-2 mt-2 h-8">
                    <img id="visa-logo" src="{{ url_for('static', filename='images/icons/visa.png') }}" class="h-8" alt="Visa">
                    <img id="mastercard-logo" src="{{ url_for('static', filename='images/icons/mastercard.png') }}" class="h-8" alt="Mastercard">
                </div>
            </div>
            <div class="input-box">
                <label for="cardnumber" class="font-bold text-sm text-slate-300">Card Number</label>
                <input type="text" id="cardnumber" name="cardnumber" inputmode="numeric" class="w-full p-3 mt-1 border border-slate-600 bg-slate-700 rounded-lg placeholder-slate-500" placeholder="1111 2222 3333 4444" required>
            </div>
            <div class="input-box">
                <label for="cardname" class="font-bold text-sm text-slate-300">Cardholder Name</label>
                <input type="text" id="cardname" name="cardname" class="w-full p-3 mt-1 border border-slate-600 bg-slate-700 rounded-lg placeholder-slate-500" placeholder="JOHN M DOE" required>
            </div>
            <div class="grid grid-cols-3 gap-4">
                <div class="input-box">
                    <label for="expmonth" class="font-bold text-sm text-slate-300">Exp. Month</label>
                    <input type="text" id="expmonth" name="expmonth" inputmode="numeric" maxlength="2" class="w-full p-3 mt-1 border border-slate-600 bg-slate-700 rounded-lg placeholder-slate-500" placeholder="MM" required>
                </div>
                <div class="input-box">
                    <label for="expyear" class="font-bold text-sm text-slate-300">Exp. Year</label>
                    <input type="text" id="expyear" name="expyear" inputmode="numeric" maxlength="2" class="w-full p-3 mt-1 border border-slate-600 bg-slate-700 rounded-lg placeholder-slate-500" placeholder="YY" required>
                </div>
                <div class="input-box">
                    <label for="cvv" class="font-bold text-sm text-slate-300">CVV</label>
                    <input type="text" id="cvv" name="cvv" inputmode="numeric" maxlength="4" class="w-full p-3 mt-1 border border-slate-600 bg-slate-700 rounded-lg placeholder-slate-500" placeholder="123" required>
                </div>
            </div>
            <p id="expiry-error" class="text-red-400 text-sm hidden h-4"></p>
            <button type="submit" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">Pay with Card</button>
        </form>

        <form id="upiPaymentForm" class="payment-form space-y-4 hidden">
            <div class="space-y-3">
                <label class="flex items-center p-3 rounded-lg border border-slate-600 bg-slate-700 has-[:checked]:border-sky-500 has-[:checked]:bg-sky-900/50 cursor-pointer">
                    <input type="radio" name="upi_app" value="gpay" class="form-radio h-5 w-5 text-sky-500 bg-slate-600 border-slate-500 focus:ring-sky-500" checked>
                    <img src="{{ url_for('static', filename='images/icons/gpay.png') }}" class="h-10 ml-4" alt="GPay">
                </label>
                <label class="flex items-center p-3 rounded-lg border border-slate-600 bg-slate-700 has-[:checked]:border-sky-500 has-[:checked]:bg-sky-900/50 cursor-pointer">
                    <input type="radio" name="upi_app" value="phonepe" class="form-radio h-5 w-5 text-sky-500 bg-slate-600 border-slate-500 focus:ring-sky-500">
                    <img src="{{ url_for('static', filename='images/icons/phonepay.png') }}" class="h-10 ml-4" alt="PhonePe">
                </label>
                <label class="flex items-center p-3 rounded-lg border border-slate-600 bg-slate-700 has-[:checked]:border-sky-500 has-[:checked]:bg-sky-900/50 cursor-pointer">
                    <input type="radio" name="upi_app" value="paytm" class="form-radio h-5 w-5 text-sky-500 bg-slate-600 border-slate-500 focus:ring-sky-500">
                    <img src="{{ url_for('static', filename='images/icons/paytm.png') }}" class="h-10 ml-4" alt="Paytm">
                </label>
            </div>
            <div class="input-box">
                <label for="upi_id" class="font-bold text-sm text-slate-300">UPI ID or Phone Number</label>
                <input type="text" id="upi_id" name="upi_id" class="w-full p-3 mt-1 border border-slate-600 bg-slate-700 rounded-lg placeholder-slate-500" placeholder="yourname@bank or 10-digit number" required>
            </div>
            <p id="upi-error" class="text-red-400 text-sm hidden h-4"></p>
            <button type="submit" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">Pay with UPI</button>
        </form>
        
        <div id="payment-message" class="mt-4 text-center"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/payment.js') }}"></script>
{% endblock %}